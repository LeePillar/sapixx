{extend name="./layout" /}
{block name='main'}
<div class="card">
    <div class="toast toast-warning"><p>安全密码用于平台购买服务时使用,默认安全密码为手机后6位。</p></div>
    <div class="card-header text-dark text-gray text-bold"><i class="icon bi-key mr-8"></i> 安全密码</div>
    <div class="card-body">
        <form id="form" action="{:url('account/safePassword')}">
            <div class="form-group">
                <label class="form-label">短信验证码</label>
                <div class="input-group">
                    <input name="sms_code" class="form-input" data-rule="required;integer;length(4)" type="number" />
                    <button href="{:url('account/getsms')}" id="get_sms" type="button" class="btn input-btn">获取验证码</button>
                </div>
            </div>
            <div class="form-group">
                <label class="form-label">新安全密码 <span class="text-gray text-tiny ml-4">仅支持6位数字</span></label>
                <input name="safe_password" class="form-input" data-rule="密码:required;integer;length(6)" type="password" autocomplete>
            </div>
            <div class="form-group">
                <label class="form-label">确认安全密码</label>
                <input name="safe_password_confirm" class="form-input" data-rule="确认密码:match(safepassword);required;integer" type="password" autocomplete>
            </div>
            <div class="form-group">
                <button type="submit" class="btn btn-primary" >确定信息</button>
                <button type="reset" class="btn ml-2" >重置</button>
            </div>
        </form> 
    </div>
</div> 
{/block}
{block name='js'}
<script type="text/javascript">
Do('base','form', function () {
    $('#form').isForm();
    $('#get_sms').actUrl({confirm:false},(rel) =>{
        204==rel.code&&$('#get_sms').setSmsBtn();
    })
});
</script> 
{/block}
